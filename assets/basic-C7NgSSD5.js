import{j as e,r as d,R as ne,a as ae}from"./client-DvaAtPIX.js";const oe=({isAdmin:t,searchTerm:r,cart:n,totalItemCount:o,setSearchTerm:c,setIsAdmin:l})=>e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40 border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"SHOP"}),!t&&e.jsx("div",{className:"ml-8 flex-1 max-w-md",children:e.jsx("input",{type:"text",value:r,onChange:s=>c(s.target.value),placeholder:"상품 검색...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})})]}),e.jsxs("nav",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>l(!t),className:`px-3 py-1.5 text-sm rounded transition-colors ${t?"bg-gray-800 text-white":"text-gray-600 hover:text-gray-900"}`,children:t?"쇼핑몰로 돌아가기":"관리자 페이지로"}),!t&&e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),n.length>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:o})]})]})]})})}),ce=({notification:t,onRemove:r})=>{const[n,o]=d.useState(!1),[c,l]=d.useState(!1);d.useEffect(()=>{const i=setTimeout(()=>o(!0),10);return()=>clearTimeout(i)},[]),d.useEffect(()=>{const i=setTimeout(()=>{s()},5e3);return()=>clearTimeout(i)},[]);const s=()=>{l(!0),setTimeout(()=>{r(t.id)},300)},a=()=>{switch(t.type){case"error":return"bg-red-600";case"warning":return"bg-yellow-600";default:return"bg-green-600"}};return e.jsx("div",{className:`transform transition-all duration-300 ease-in-out ${n&&!c?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}`,children:e.jsxs("div",{className:`p-4 rounded-md shadow-lg text-white flex justify-between items-center ${a()} min-w-0`,children:[e.jsx("span",{className:"mr-2 flex-1 text-sm font-medium break-words",children:t.message}),e.jsx("button",{onClick:s,className:"text-white hover:text-gray-200 transition-colors duration-150 flex-shrink-0 ml-2","aria-label":"알림 닫기",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})},le=({notifications:t,onRemove:r})=>t.length===0?null:e.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2 max-w-sm w-full pr-4",children:t.map(n=>e.jsx(ce,{notification:n,onRemove:r},n.id))}),ie=({couponForm:t,handleCouponSubmit:r,updateCouponForm:n,updateShowCouponForm:o,addNotification:c})=>e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsx("h3",{className:"text-md font-medium text-gray-900",children:"새 쿠폰 생성"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰명"}),e.jsx("input",{type:"text",value:t.name,onChange:l=>n({name:l.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:"신규 가입 쿠폰",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰 코드"}),e.jsx("input",{type:"text",value:t.code,onChange:l=>n({code:l.target.value.toUpperCase()}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm font-mono",placeholder:"WELCOME2024",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"할인 타입"}),e.jsxs("select",{value:t.discountType,onChange:l=>n({...t,discountType:l.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",children:[e.jsx("option",{value:"amount",children:"정액 할인"}),e.jsx("option",{value:"percentage",children:"정률 할인"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t.discountType==="amount"?"할인 금액":"할인율(%)"}),e.jsx("input",{type:"text",value:t.discountValue===0?"":t.discountValue,onChange:l=>{const{value:s}=l.target;(s===""||/^\d+$/.test(s))&&n({...t,discountValue:s===""?0:parseInt(s)})},onBlur:l=>{const s=parseInt(l.target.value)||0;t.discountType==="percentage"?s>100?(c("할인율은 100%를 초과할 수 없습니다","error"),n({discountValue:100})):s<0&&n({discountValue:0}):s>1e5?(c("할인 금액은 100,000원을 초과할 수 없습니다","error"),n({discountValue:1e5})):s<0&&n({discountValue:0})},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:t.discountType==="amount"?"5000":"10",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:"쿠폰 생성"})]})]})}),de=({coupons:t,deleteCoupon:r,showCouponForm:n,updateShowCouponForm:o,couponForm:c,handleCouponSubmit:l,updateCouponForm:s,addNotification:a})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold",children:"쿠폰 관리"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[t.map(i=>e.jsx("div",{className:"relative bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 border border-indigo-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:i.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 font-mono",children:i.code}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white text-indigo-700",children:i.discountType==="amount"?`${i.discountValue.toLocaleString()}원 할인`:`${i.discountValue}% 할인`})})]}),e.jsx("button",{onClick:()=>r(i.code),className:"text-gray-400 hover:text-red-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},i.code)),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center hover:border-gray-400 transition-colors",children:e.jsxs("button",{onClick:()=>o(!n),className:"text-gray-400 hover:text-gray-600 flex flex-col items-center",children:[e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("p",{className:"mt-2 text-sm font-medium",children:"새 쿠폰 추가"})]})})]}),n&&e.jsx(ie,{couponForm:c,handleCouponSubmit:l,updateCouponForm:s,updateShowCouponForm:o,addNotification:a})]})]}),ue=({activeTab:t,setActiveTab:r})=>e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>r("products"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${t==="products"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"상품 관리"}),e.jsx("button",{onClick:()=>r("coupons"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${t==="coupons"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"쿠폰 관리"})]})}),me=({productForm:t,editingProduct:r,onSubmit:n,onCancel:o,updateProductForm:c,addNotification:l})=>e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r==="new"?"새 상품 추가":"상품 수정"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상품명"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>c({name:s.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"설명"}),e.jsx("input",{type:"text",value:t.description,onChange:s=>c({description:s.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"가격"}),e.jsx("input",{type:"text",value:t.price===0?"":t.price,onChange:s=>{const{value:a}=s.target;(a===""||/^\d+$/.test(a))&&c({price:a===""?0:parseInt(a)})},onBlur:s=>{const{value:a}=s.target;a===""?c({price:0}):parseInt(a)<0&&(l("가격은 0보다 커야 합니다","error"),c({price:0}))},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"재고"}),e.jsx("input",{type:"text",value:t.stock===0?"":t.stock,onChange:s=>{const{value:a}=s.target;(a===""||/^\d+$/.test(a))&&c({stock:a===""?0:parseInt(a)})},onBlur:s=>{const{value:a}=s.target;a===""?c({stock:0}):parseInt(a)<0?(l("재고는 0보다 커야 합니다","error"),c({stock:0})):parseInt(a)>9999&&(l("재고는 9999개를 초과할 수 없습니다","error"),c({stock:9999}))},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"할인 정책"}),e.jsxs("div",{className:"space-y-2",children:[t.discounts.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded",children:[e.jsx("input",{type:"number",value:s.quantity,onChange:i=>{const m=[...t.discounts];m[a].quantity=parseInt(i.target.value)||0,c({discounts:m})},className:"w-20 px-2 py-1 border rounded",min:"1",placeholder:"수량"}),e.jsx("span",{className:"text-sm",children:"개 이상 구매 시"}),e.jsx("input",{type:"number",value:s.rate*100,onChange:i=>{const m=[...t.discounts];m[a].rate=(parseInt(i.target.value)||0)/100,c({discounts:m})},className:"w-16 px-2 py-1 border rounded",min:"0",max:"100",placeholder:"%"}),e.jsx("span",{className:"text-sm",children:"% 할인"}),e.jsx("button",{type:"button",onClick:()=>{const i=t.discounts.filter((m,b)=>b!==a);c({discounts:i})},className:"text-red-600 hover:text-red-800",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},a)),e.jsx("button",{type:"button",onClick:()=>{c({discounts:[...t.discounts,{quantity:10,rate:.1}]})},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"+ 할인 추가"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:r==="new"?"추가":"수정"})]})]})}),xe=({products:t,getDisplayPrice:r,startEditProduct:n,deleteProduct:o,showProductForm:c,productForm:l,editingProduct:s,handleProductSubmit:a,updateProductForm:i,handleCancelProduct:m,addNotification:b,handleAddProduct:y})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"상품 목록"}),e.jsx("button",{onClick:y,className:"px-4 py-2 bg-gray-900 text-white text-sm rounded-md hover:bg-gray-800",children:"새 상품 추가"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상품명"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가격"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"재고"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"설명"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(u=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:u.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r(u.price,u.id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u.stock>10?"bg-green-100 text-green-800":u.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[u.stock,"개"]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:u.description||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>n(u),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"수정"}),e.jsx("button",{onClick:()=>o(u.id),className:"text-red-600 hover:text-red-900",children:"삭제"})]})]},u.id))})]})}),c&&e.jsx(me,{productForm:l,editingProduct:s,onSubmit:a,onCancel:m,updateProductForm:i,addNotification:b})]}),he=({activeTab:t,setActiveTab:r,products:n,coupons:o,getDisplayPrice:c,startEditProduct:l,deleteProduct:s,deleteCoupon:a,showProductForm:i,productForm:m,editingProduct:b,handleProductSubmit:y,updateProductForm:u,handleCancelProduct:f,addNotification:N,showCouponForm:x,updateShowCouponForm:g,couponForm:h,handleCouponSubmit:j,updateCouponForm:p,handleAddProduct:v})=>e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"관리자 대시보드"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"상품과 쿠폰을 관리할 수 있습니다"})]}),e.jsx(ue,{activeTab:t,setActiveTab:r}),t==="products"?e.jsx(xe,{products:n,getDisplayPrice:c,startEditProduct:l,deleteProduct:s,showProductForm:i,productForm:m,editingProduct:b,handleProductSubmit:y,updateProductForm:u,handleCancelProduct:f,addNotification:N,handleAddProduct:v}):e.jsx(de,{coupons:o,deleteCoupon:a,showCouponForm:x,updateShowCouponForm:g,couponForm:h,handleCouponSubmit:j,updateCouponForm:p,addNotification:N})]}),$=(t,r)=>{const{price:n}=t.product,{quantity:o}=t,c=ge(t,r);return Math.round(n*o*(1-c))},ge=(t,r)=>{const{discounts:n}=t.product,{quantity:o}=t,c=n.reduce((s,a)=>o>=a.quantity&&a.rate>s?a.rate:s,0);return r.some(s=>s.quantity>=10)?Math.min(c+.05,.5):c},V=(t,r)=>{let n=0,o=0;return t.forEach(c=>{const l=c.product.price*c.quantity;n+=l,o+=$(c,t)}),r&&(r.discountType==="amount"?o=Math.max(0,o-r.discountValue):o=Math.round(o*(1-r.discountValue/100))),{totalBeforeDiscount:Math.round(n),totalAfterDiscount:Math.round(o)}},I=(t,r,n)=>r?n<=0?pe(t,r):t.map(o=>o.product.id===r?{...o,quantity:n}:o):t,pe=(t,r)=>t.filter(n=>n.product.id!==r),be=({selectedCoupon:t,coupons:r,applyCoupon:n})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"쿠폰 할인"}),e.jsx("button",{className:"text-xs text-blue-600 hover:underline",children:"쿠폰 등록"})]}),r.length>0&&e.jsxs("select",{className:"w-full text-sm border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-blue-500",value:t?.code||"",onChange:o=>{const c=r.find(l=>l.code===o.target.value);n(c||null)},children:[e.jsx("option",{value:"",children:"쿠폰 선택"}),r.map(o=>e.jsxs("option",{value:o.code,children:[o.name," (",o.discountType==="amount"?`${o.discountValue.toLocaleString()}원`:`${o.discountValue}%`,")"]},o.code))]})]}),ye=({totals:t,completeOrder:r})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"결제 정보"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"상품 금액"}),e.jsxs("span",{className:"font-medium",children:[t.totalBeforeDiscount.toLocaleString(),"원"]})]}),t.totalBeforeDiscount-t.totalAfterDiscount>0&&e.jsxs("div",{className:"flex justify-between text-red-500",children:[e.jsx("span",{children:"할인 금액"}),e.jsxs("span",{children:["-",(t.totalBeforeDiscount-t.totalAfterDiscount).toLocaleString(),"원"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-t border-gray-200",children:[e.jsx("span",{className:"font-semibold",children:"결제 예정 금액"}),e.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[t.totalAfterDiscount.toLocaleString(),"원"]})]})]}),e.jsxs("button",{onClick:r,className:"w-full mt-4 py-3 bg-yellow-400 text-gray-900 rounded-md font-medium hover:bg-yellow-500 transition-colors",children:[t.totalAfterDiscount.toLocaleString(),"원 결제하기"]}),e.jsx("div",{className:"mt-3 text-xs text-gray-500 text-center",children:e.jsx("p",{children:"* 실제 결제는 이루어지지 않습니다"})})]}),je=({cart:t,selectedCoupon:r,coupons:n,totals:o,removeFromCart:c,updateQuantity:l,applyCoupon:s,completeOrder:a})=>e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-24 space-y-4",children:[e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"장바구니"]}),t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"장바구니가 비어있습니다"})]}):e.jsx("div",{className:"space-y-3",children:t.map(i=>{const m=$(i,t),b=i.product.price*i.quantity,y=m<b,u=y?Math.round((1-m/b)*100):0;return e.jsxs("div",{className:"border-b pb-3 last:border-b-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 flex-1",children:i.product.name}),e.jsx("button",{onClick:()=>c(i.product.id),className:"text-gray-400 hover:text-red-500 ml-2",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>l(i.product.id,i.quantity-1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:e.jsx("span",{className:"text-xs",children:"−"})}),e.jsx("span",{className:"mx-3 text-sm font-medium w-8 text-center",children:i.quantity}),e.jsx("button",{onClick:()=>l(i.product.id,i.quantity+1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:e.jsx("span",{className:"text-xs",children:"+"})})]}),e.jsxs("div",{className:"text-right",children:[y&&e.jsxs("span",{className:"text-xs text-red-500 font-medium block",children:["-",u,"%"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Math.round(m).toLocaleString(),"원"]})]})]})]},i.product.id)})})]}),t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(be,{selectedCoupon:r,coupons:n,applyCoupon:s}),e.jsx(ye,{totals:o,completeOrder:a})]})]})}),fe=({products:t,debouncedSearchTerm:r,getRemainingStock:n,getDisplayPrice:o,addToCart:c})=>{const l=r?t.filter(s=>s.name.toLowerCase().includes(r.toLowerCase())||s.description&&s.description.toLowerCase().includes(r.toLowerCase())):t;return e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("section",{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"전체 상품"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["총 ",t.length,"개 상품"]})]}),l.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-500",children:['"',r,'"에 대한 검색 결과가 없습니다.']})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(s=>{const a=n(s);return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-24 h-24 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.isRecommended&&e.jsx("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"BEST"}),s.discounts.length>0&&e.jsxs("span",{className:"absolute top-2 left-2 bg-orange-500 text-white text-xs px-2 py-1 rounded",children:["~",Math.max(...s.discounts.map(i=>i.rate))*100,"%"]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:s.description}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:o(s.price,s.id)}),s.discounts.length>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[s.discounts[0].quantity,"개 이상 구매시 할인"," ",s.discounts[0].rate*100,"%"]})]}),e.jsxs("div",{className:"mb-3",children:[a<=5&&a>0&&e.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["품절임박! ",a,"개 남음"]}),a>5&&e.jsxs("p",{className:"text-xs text-gray-500",children:["재고 ",a,"개"]})]}),e.jsx("button",{onClick:()=>c(s),disabled:a<=0,className:`w-full py-2 px-4 rounded-md font-medium transition-colors ${a<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"}`,children:a<=0?"품절":"장바구니 담기"})]})]},s.id)})})]})})},ve=(t,r)=>{const[n,o]=d.useState(()=>{const x=localStorage.getItem("cart");if(x)try{return JSON.parse(x)}catch{return[]}return[]}),[c,l]=d.useState(0),[s,a]=d.useState(null);d.useEffect(()=>{const x=n.reduce((g,h)=>g+h.quantity,0);l(x)},[n]),d.useEffect(()=>{n.length>0?localStorage.setItem("cart",JSON.stringify(n)):localStorage.removeItem("cart")},[n]);const i=x=>{const g=n.find(j=>j.product.id===x.id);return x.stock-(g?.quantity||0)},m=d.useCallback(x=>{if(i(x)<=0){r("재고가 부족합니다!","error");return}o(h=>{const j=h.find(p=>p.product.id===x.id);if(j){const p=j.quantity+1;return p>x.stock?(r(`재고는 ${x.stock}개까지만 있습니다.`,"error"),h):h.map(v=>v.product.id===x.id?{...v,quantity:p}:v)}return[...h,{product:x,quantity:1}]}),r("장바구니에 담았습니다","success")},[n,r,i]),b=d.useCallback(x=>{o(g=>g.filter(h=>h.product.id!==x))},[]),y=d.useCallback((x,g)=>{if(g<=0){o(p=>I(p,x,0));return}const h=t.find(p=>p.id===x);if(!h)return;const j=h.stock;if(g>j){r(`재고는 ${j}개까지만 있습니다.`,"error");return}o(p=>I(p,x,g))},[o,t,r]),u=d.useCallback(()=>{o([])},[]),f=d.useCallback(x=>{if(!x){a(null);return}if(V(n,s).totalAfterDiscount<1e4&&x.discountType==="percentage"){r("percentage 쿠폰은 10,000원 이상 구매 시 사용 가능합니다.","error");return}a(x),r("쿠폰이 적용되었습니다.","success")},[n,s,r]),N=d.useCallback(()=>V(n,s),[n,s]);return{cart:n,getRemainingStock:i,updateQuantity:y,addToCart:m,removeFromCart:b,applyCoupon:f,clearCart:u,calculateTotal:N,totalItemCount:c,selectedCoupon:s}},Ne=()=>{const[t,r]=d.useState([]),n=d.useCallback((c,l="success")=>{const s=Date.now().toString();r(a=>[...a,{id:s,message:c,type:l}]),setTimeout(()=>{r(a=>a.filter(i=>i.id!==s))},3e3)},[]),o=d.useCallback(c=>{r(l=>l.filter(s=>s.id!==c))},[]);return{notifications:t,addNotification:n,removeNotification:o}},E=[{id:"p1",name:"상품1",price:1e4,stock:20,discounts:[{quantity:10,rate:.1},{quantity:20,rate:.2}],description:"최고급 품질의 프리미엄 상품입니다."},{id:"p2",name:"상품2",price:2e4,stock:20,discounts:[{quantity:10,rate:.15}],description:"다양한 기능을 갖춘 실용적인 상품입니다.",isRecommended:!0},{id:"p3",name:"상품3",price:3e4,stock:20,discounts:[{quantity:10,rate:.2},{quantity:30,rate:.25}],description:"대용량과 고성능을 자랑하는 상품입니다."}],B=[{name:"5000원 할인",code:"AMOUNT5000",discountType:"amount",discountValue:5e3},{name:"10% 할인",code:"PERCENT10",discountType:"percentage",discountValue:10}],we=(t,r,n)=>{const[o,c]=d.useState(()=>{const a=localStorage.getItem("coupons");if(a)try{return JSON.parse(a)}catch{return B}return B});d.useEffect(()=>{localStorage.setItem("coupons",JSON.stringify(o))},[o]);const l=d.useCallback(a=>{if(o.find(m=>m.code===a.code)){n("이미 존재하는 쿠폰 코드입니다.","error");return}c(m=>[...m,a]),n("쿠폰이 추가되었습니다.","success")},[o,n]),s=d.useCallback(a=>{c(i=>i.filter(m=>m.code!==a)),t?.code===a&&r(null),n("쿠폰이 삭제되었습니다.","success")},[t,r,n]);return{coupons:o,addCoupon:l,deleteCoupon:s}},ke=t=>{const[r,n]=d.useState(()=>{const s=localStorage.getItem("products");if(s)try{return JSON.parse(s)}catch{return E}return E});d.useEffect(()=>{localStorage.setItem("products",JSON.stringify(r))},[r]);const o=d.useCallback(s=>{const a={...s,id:`p${Date.now()}`};n(i=>[...i,a]),t("상품이 추가되었습니다.","success")},[t]),c=d.useCallback((s,a)=>{n(i=>i.map(m=>m.id===s?{...m,...a}:m)),t("상품이 수정되었습니다.","success")},[t]),l=d.useCallback(s=>{n(a=>a.filter(i=>i.id!==s)),t("상품이 삭제되었습니다.","success")},[t]);return{products:r,addProduct:o,updateProduct:c,deleteProduct:l}},Ce=()=>{const[t,r]=d.useState(!1),[n,o]=d.useState({name:"",code:"",discountType:"amount",discountValue:0});return{couponForm:n,showCouponForm:t,handleCouponFormSubmit:()=>{o({name:"",code:"",discountType:"amount",discountValue:0}),r(!1)},updateCouponForm:a=>{o(i=>({...i,...a}))},updateShowCouponForm:a=>{r(a)}}},Se=()=>{const[t,r]=d.useState(!1),[n,o]=d.useState({name:"",price:0,stock:0,description:"",discounts:[]}),[c,l]=d.useState(null);return{productForm:n,showProductForm:t,editingProduct:c,handleProductFormSubmit:()=>{o({name:"",price:0,stock:0,description:"",discounts:[]}),r(!1)},startEditProduct:u=>{typeof u=="string"?l(u):(l(u.id),o({name:u.name,price:u.price,stock:u.stock,description:u.description||"",discounts:u.discounts||[]})),r(!0)},handleCancelProduct:()=>{l(null),o({name:"",price:0,stock:0,description:"",discounts:[]}),r(!1)},updateProductForm:u=>{o(f=>({...f,...u}))},updateShowProductForm:u=>{r(u)},resetEditingProduct:()=>{l(null)}}},Te=()=>{const[t,r]=d.useState(""),[n,o]=d.useState("");return d.useEffect(()=>{const l=setTimeout(()=>{o(t)},500);return()=>clearTimeout(l)},[t]),{searchTerm:t,debouncedSearchTerm:n,setSearchTermValue:l=>{r(l)}}},Le=({addNotification:t,clearCart:r,applyCoupon:n})=>({completeOrder:d.useCallback(()=>{const c=`ORD-${Date.now()}`;t(`주문이 완료되었습니다. 주문번호: ${c}`,"success"),r(),n(null)},[t,r,n])}),Pe=(t,r)=>{const n=t.toLocaleString();return r?`${n}원`:`₩${n}`},Me=()=>{const[t,r]=d.useState(!1),[n,o]=d.useState("products"),{addNotification:c,notifications:l,removeNotification:s}=Ne(),{products:a,addProduct:i,updateProduct:m,deleteProduct:b}=ke(c),{getRemainingStock:y,updateQuantity:u,addToCart:f,removeFromCart:N,calculateTotal:x,clearCart:g,applyCoupon:h,cart:j,selectedCoupon:p,totalItemCount:v}=ve(a,c),{coupons:S,addCoupon:O,deleteCoupon:R}=we(p,h,c),{couponForm:T,showCouponForm:A,handleCouponFormSubmit:W,updateCouponForm:H,updateShowCouponForm:z}=Ce(),{productForm:k,showProductForm:J,editingProduct:C,handleProductFormSubmit:U,startEditProduct:L,resetEditingProduct:Q,updateProductForm:P,updateShowProductForm:_,handleCancelProduct:G}=Se(),{searchTerm:K,debouncedSearchTerm:X,setSearchTermValue:Y}=Te(),{completeOrder:Z}=Le({addNotification:c,clearCart:g,applyCoupon:h}),M=(w,q)=>{if(q){const D=a.find(re=>re.id===q);if(D&&y(D)<=0)return"SOLD OUT"}return Pe(w,t)},F=w=>{w.preventDefault(),C&&C!=="new"?m(C,k):i({...k,discounts:k.discounts}),U(),Q()},ee=w=>{w.preventDefault(),O(T),W()},te=x(),se=()=>{L("new"),P({name:"",price:0,stock:0,description:"",discounts:[]}),_(!0)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(le,{notifications:l,onRemove:s}),e.jsx(oe,{isAdmin:t,searchTerm:K,cart:j,totalItemCount:v,setSearchTerm:Y,setIsAdmin:r}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:t?e.jsx(he,{activeTab:n,setActiveTab:o,products:a,coupons:S,getDisplayPrice:M,startEditProduct:L,deleteProduct:b,deleteCoupon:R,showProductForm:J,productForm:k,editingProduct:C,handleProductSubmit:F,updateProductForm:P,handleCancelProduct:G,addNotification:c,showCouponForm:A,updateShowCouponForm:z,couponForm:T,handleCouponSubmit:ee,updateCouponForm:H,handleAddProduct:se}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx(fe,{products:a,debouncedSearchTerm:X,getRemainingStock:y,getDisplayPrice:M,addToCart:f}),e.jsx(je,{cart:j,selectedCoupon:p,coupons:S,totals:te,removeFromCart:N,updateQuantity:u,applyCoupon:h,completeOrder:Z})]})})]})};ne.createRoot(document.getElementById("root")).render(e.jsx(ae.StrictMode,{children:e.jsx(Me,{})}));
