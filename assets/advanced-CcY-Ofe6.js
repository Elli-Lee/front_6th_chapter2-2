import{a as ae,r as T,j as t,R as Me}from"./client-DvaAtPIX.js";const O={},he=(e,s)=>e.unstable_is?e.unstable_is(s):s===e,fe=e=>"init"in e,ne=e=>!!e.write,pe=e=>"v"in e||"e"in e,H=e=>{if("e"in e)throw e.e;if((O?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},X=new WeakMap,ge=e=>{var s;return Y(e)&&!!((s=X.get(e))!=null&&s[0])},Ie=e=>{const s=X.get(e);s?.[0]&&(s[0]=!1,s[1].forEach(n=>n()))},je=(e,s)=>{let n=X.get(e);if(!n){n=[!0,new Set],X.set(e,n);const r=()=>{n[0]=!1};e.then(r,r)}n[1].add(s)},Y=e=>typeof e?.then=="function",we=(e,s,n)=>{n.p.has(e)||(n.p.add(e),s.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},re=(e,s,n)=>{const r=n(e),i="v"in r,l=r.v;if(Y(s))for(const c of r.d.keys())we(e,s,n(c));r.v=s,delete r.e,(!i||!Object.is(l,r.v))&&(++r.n,Y(l)&&Ie(l))},ye=(e,s,n)=>{var r;const i=new Set;for(const l of((r=n.get(e))==null?void 0:r.t)||[])n.has(l)&&i.add(l);for(const l of s.p)i.add(l);return i},Ve=Symbol(),Fe=(e=new WeakMap,s=new WeakMap,n=new WeakMap,r=new Set,i=new Set,l=new Set,c={},x=(y,...j)=>y.read(...j),a=(y,...j)=>y.write(...j),o=(y,j)=>{var w;return(w=y.unstable_onInit)==null?void 0:w.call(y,j)},d=(y,j)=>{var w;return(w=y.onMount)==null?void 0:w.call(y,j)},...m)=>{const y=m[0]||(u=>{if((O?"production":void 0)!=="production"&&!u)throw new Error("Atom is undefined or null");let v=e.get(u);return v||(v={d:new Map,p:new Set,n:0},e.set(u,v),o?.(u,te)),v}),j=m[1]||(()=>{const u=[],v=g=>{try{g()}catch(f){u.push(f)}};do{c.f&&v(c.f);const g=new Set,f=g.add.bind(g);r.forEach(h=>{var p;return(p=s.get(h))==null?void 0:p.l.forEach(f)}),r.clear(),l.forEach(f),l.clear(),i.forEach(f),i.clear(),g.forEach(v),r.size&&w()}while(r.size||l.size||i.size);if(u.length)throw new AggregateError(u)}),w=m[2]||(()=>{const u=[],v=new WeakSet,g=new WeakSet,f=Array.from(r);for(;f.length;){const h=f[f.length-1],p=y(h);if(g.has(h)){f.pop();continue}if(v.has(h)){if(n.get(h)===p.n)u.push([h,p]);else if((O?"production":void 0)!=="production"&&n.has(h))throw new Error("[Bug] invalidated atom exists");g.add(h),f.pop();continue}v.add(h);for(const A of ye(h,p,s))v.has(A)||f.push(A)}for(let h=u.length-1;h>=0;--h){const[p,A]=u[h];let _=!1;for(const V of A.d.keys())if(V!==p&&r.has(V)){_=!0;break}_&&(D(p),U(p)),n.delete(p)}}),D=m[3]||(u=>{var v;const g=y(u);if(pe(g)&&(s.has(u)&&n.get(u)!==g.n||Array.from(g.d).every(([N,K])=>D(N).n===K)))return g;g.d.clear();let f=!0;const h=()=>{s.has(u)&&(U(u),w(),j())},p=N=>{var K;if(he(u,N)){const xe=y(N);if(!pe(xe))if(fe(N))re(N,N.init,y);else throw new Error("no atom init");return H(xe)}const se=D(N);try{return H(se)}finally{g.d.set(N,se.n),ge(g.v)&&we(u,g.v,se),(K=s.get(N))==null||K.t.add(u),f||h()}};let A,_;const V={get signal(){return A||(A=new AbortController),A.signal},get setSelf(){return(O?"production":void 0)!=="production"&&!ne(u)&&console.warn("setSelf function cannot be used with read-only atom"),!_&&ne(u)&&(_=(...N)=>{if((O?"production":void 0)!=="production"&&f&&console.warn("setSelf function cannot be called in sync"),!f)try{return q(u,...N)}finally{w(),j()}}),_}},G=g.n;try{const N=x(u,p,V);return re(u,N,y),Y(N)&&(je(N,()=>A?.abort()),N.then(h,h)),g}catch(N){return delete g.v,g.e=N,++g.n,g}finally{f=!1,G!==g.n&&n.get(u)===G&&(n.set(u,g.n),r.add(u),(v=c.c)==null||v.call(c,u))}}),ee=m[4]||(u=>{const v=[u];for(;v.length;){const g=v.pop(),f=y(g);for(const h of ye(g,f,s)){const p=y(h);n.set(h,p.n),v.push(h)}}}),q=m[5]||((u,...v)=>{let g=!0;const f=p=>H(D(p)),h=(p,...A)=>{var _;const V=y(p);try{if(he(u,p)){if(!fe(p))throw new Error("atom not writable");const G=V.n,N=A[0];re(p,N,y),U(p),G!==V.n&&(r.add(p),(_=c.c)==null||_.call(c,p),ee(p));return}else return q(p,...A)}finally{g||(w(),j())}};try{return a(u,f,h,...v)}finally{g=!1}}),U=m[6]||(u=>{var v;const g=y(u),f=s.get(u);if(f&&!ge(g.v)){for(const[h,p]of g.d)if(!f.d.has(h)){const A=y(h);J(h).t.add(u),f.d.add(h),p!==A.n&&(r.add(h),(v=c.c)==null||v.call(c,h),ee(h))}for(const h of f.d||[])if(!g.d.has(h)){f.d.delete(h);const p=Q(h);p?.t.delete(u)}}}),J=m[7]||(u=>{var v;const g=y(u);let f=s.get(u);if(!f){D(u);for(const h of g.d.keys())J(h).t.add(u);if(f={l:new Set,d:new Set(g.d.keys()),t:new Set},s.set(u,f),(v=c.m)==null||v.call(c,u),ne(u)){const h=()=>{let p=!0;const A=(..._)=>{try{return q(u,..._)}finally{p||(w(),j())}};try{const _=d(u,A);_&&(f.u=()=>{p=!0;try{_()}finally{p=!1}})}finally{p=!1}};i.add(h)}}return f}),Q=m[8]||(u=>{var v;const g=y(u);let f=s.get(u);if(f&&!f.l.size&&!Array.from(f.t).some(h=>{var p;return(p=s.get(h))==null?void 0:p.d.has(u)})){f.u&&l.add(f.u),f=void 0,s.delete(u),(v=c.u)==null||v.call(c,u);for(const h of g.d.keys()){const p=Q(h);p?.t.delete(u)}return}return f}),Ee=[e,s,n,r,i,l,c,x,a,o,d,y,j,w,D,ee,q,U,J,Q],te={get:u=>H(D(u)),set:(u,...v)=>{try{return q(u,...v)}finally{w(),j()}},sub:(u,v)=>{const f=J(u).l;return f.add(v),j(),()=>{f.delete(v),Q(u),j()}}};return Object.defineProperty(te,Ve,{value:Ee}),te},Re=Fe,be=je,Ne={};let qe=0;function b(e,s){const n=`atom${++qe}`,r={toString(){return(Ne?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=$e,r.write=Oe),s&&(r.write=s),r}function $e(e){return e(this)}function Oe(e,s,n){return s(this,typeof n=="function"?n(e(this)):n)}function We(){return Re()}let $;function Be(){return $||($=We(),(Ne?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=$),globalThis.__JOTAI_DEFAULT_STORE__!==$&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),$}const ze={},Ue=T.createContext(void 0);function Se(e){return T.useContext(Ue)||Be()}const ie=e=>typeof e?.then=="function",ce=e=>{e.status||(e.status="pending",e.then(s=>{e.status="fulfilled",e.value=s},s=>{e.status="rejected",e.reason=s}))},Je=ae.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(ce(e),e)}),oe=new WeakMap,ve=(e,s)=>{let n=oe.get(e);return n||(n=new Promise((r,i)=>{let l=e;const c=o=>d=>{l===o&&r(d)},x=o=>d=>{l===o&&i(d)},a=()=>{try{const o=s();ie(o)?(oe.set(o,n),l=o,o.then(c(o),x(o)),be(o,a)):r(o)}catch(o){i(o)}};e.then(c(e),x(e)),be(e,a)}),oe.set(e,n)),n};function C(e,s){const{delay:n,unstable_promiseStatus:r=!ae.use}={},i=Se(),[[l,c,x],a]=T.useReducer(d=>{const m=i.get(e);return Object.is(d[0],m)&&d[1]===i&&d[2]===e?d:[m,i,e]},void 0,()=>[i.get(e),i,e]);let o=l;if((c!==i||x!==e)&&(a(),o=i.get(e)),T.useEffect(()=>{const d=i.sub(e,()=>{if(r)try{const m=i.get(e);ie(m)&&ce(ve(m,()=>i.get(e)))}catch{}if(typeof n=="number"){setTimeout(a,n);return}a()});return a(),d},[i,e,n,r]),T.useDebugValue(o),ie(o)){const d=ve(o,()=>i.get(e));return r&&ce(d),Je(d)}return o}function S(e,s){const n=Se();return T.useCallback((...i)=>{if((ze?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...i)},[n,e])}function Z(e,s){return[C(e),S(e)]}const le={},Qe=Symbol((le?"production":void 0)!=="production"?"RESET":""),Ce=e=>typeof e?.then=="function";function Ge(e=()=>{try{return window.localStorage}catch(n){(le?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},s){var n;let r,i;const l={getItem:(a,o)=>{var d,m;const y=w=>{if(w=w||"",r!==w){try{i=JSON.parse(w,s?.reviver)}catch{return o}r=w}return i},j=(m=(d=e())==null?void 0:d.getItem(a))!=null?m:null;return Ce(j)?j.then(y):y(j)},setItem:(a,o)=>{var d;return(d=e())==null?void 0:d.setItem(a,JSON.stringify(o,void 0))},removeItem:a=>{var o;return(o=e())==null?void 0:o.removeItem(a)}},c=a=>(o,d,m)=>a(o,y=>{let j;try{j=JSON.parse(y||"")}catch{j=m}d(j)});let x;try{x=(n=e())==null?void 0:n.subscribe}catch{}return!x&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(x=(a,o)=>{if(!(e()instanceof window.Storage))return()=>{};const d=m=>{m.storageArea===e()&&m.key===a&&o(m.newValue)};return window.addEventListener("storage",d),()=>{window.removeEventListener("storage",d)}}),x&&(l.subscribe=c(x)),l}const Ke=Ge();function I(e,s,n=Ke,r){const i=b(s);return(le?"production":void 0)!=="production"&&(i.debugPrivate=!0),i.onMount=c=>{c(n.getItem(e,s));let x;return n.subscribe&&(x=n.subscribe(e,c,s)),x},b(c=>c(i),(c,x,a)=>{const o=typeof a=="function"?a(c(i)):a;return o===Qe?(x(i,s),n.removeItem(e)):Ce(o)?o.then(d=>(x(i,d),n.setItem(e,d))):(x(i,o),n.setItem(e,o))})}const de=I("isAdmin",!1),He=I("activeTab","products"),Ae=I("searchTerm",""),ke=I("debouncedSearchTerm",""),Xe=b(null,(e,s,n)=>(s(Ae,n),setTimeout(()=>{s(ke,n)},500))),Ye=[{name:"5000원 할인",code:"AMOUNT5000",discountType:"amount",discountValue:5e3},{name:"10% 할인",code:"PERCENT10",discountType:"percentage",discountValue:10}],_e=(e,s)=>{const{price:n}=e.product,{quantity:r}=e,i=Ze(e,s);return Math.round(n*r*(1-i))},Ze=(e,s)=>{const{discounts:n}=e.product,{quantity:r}=e,i=n.reduce((x,a)=>r>=a.quantity&&a.rate>x?a.rate:x,0),l=s.some(x=>x.quantity>=10);return s.some(x=>x.quantity>=20)?Math.min(i+.1,.5):l?Math.min(i+.05,.5):i},ue=(e,s)=>{let n=0,r=0;return e.forEach(i=>{const l=i.product.price*i.quantity;n+=l,r+=_e(i,e)}),s&&(s.discountType==="amount"?r=Math.max(0,r-s.discountValue):r=Math.round(r*(1-s.discountValue/100))),{totalBeforeDiscount:Math.round(n),totalAfterDiscount:Math.round(r)}},W=I("notifications",[]),P=b(null,(e,s,{id:n,message:r,type:i="success"})=>{const l={id:n,message:r,type:i},c=e(W);s(W,[...c,l])}),et=b(null,(e,s,n)=>{const r=e(W);s(W,r.filter(i=>i.id!==n))}),tt=[{id:"p1",name:"상품1",price:1e4,stock:20,discounts:[{quantity:10,rate:.1},{quantity:20,rate:.2}],description:"최고급 품질의 프리미엄 상품입니다."},{id:"p2",name:"상품2",price:2e4,stock:20,discounts:[{quantity:10,rate:.15}],description:"다양한 기능을 갖춘 실용적인 상품입니다.",isRecommended:!0},{id:"p3",name:"상품3",price:3e4,stock:20,discounts:[{quantity:10,rate:.2},{quantity:30,rate:.25}],description:"대용량과 고성능을 자랑하는 상품입니다."}],L=I("products",tt),st=b(null,(e,s,n)=>{const r=e(L),i={id:`p${Date.now()}`,...n};s(L,[...r,i])}),nt=b(null,(e,s,{id:n,productForm:r})=>{const l=e(L).map(c=>c.id===n?{...c,...r}:c);s(L,l)}),rt=b(null,(e,s,n)=>{const i=e(L).filter(l=>l.id!==n);s(L,i)}),k=I("cart",[]),E=b(null),Pe=b(e=>s=>{const r=e(k).find(i=>i.product.id===s.id);return s.stock-(r?.quantity||0)});b(e=>{const s=e(k),n=e(E);return ue(s,n)});const ot=b(e=>{const s=e(k),n=e(E);return ue(s,n)}),it=b(null,(e,s,n)=>{const r=e(k);if(e(Pe)(n)<=0){s(P,{id:Date.now().toString(),message:"재고가 부족합니다!",type:"error"});return}const c=r.find(x=>x.product.id===n.id);if(c){const x=c.quantity+1;if(x>n.stock){s(P,{id:Date.now().toString(),message:`재고는 ${n.stock}개까지만 있습니다.`,type:"error"});return}const a=r.map(o=>o.product.id===n.id?{...o,quantity:x}:o);s(k,a)}else s(k,[...r,{product:n,quantity:1}]);s(P,{id:Date.now().toString(),message:"장바구니에 담았습니다",type:"success"})}),ct=b(null,(e,s,n)=>{const i=e(k).filter(l=>l.product.id!==n);s(k,i)}),at=b(null,(e,s,{productId:n,quantity:r})=>{const i=e(k),l=e(L);if(r<=0){const o=i.filter(d=>d.product.id!==n);s(k,o);return}const c=l.find(o=>o.id===n);if(!c)return;const x=c.stock;if(r>x){s(P,{id:Date.now().toString(),message:`재고는 ${x}개까지만 있습니다.`,type:"error"});return}const a=i.map(o=>o.product.id===n?{...o,quantity:r}:o);s(k,a)}),lt=at,dt=b(null,(e,s)=>{s(k,[]),s(E,null)}),Te=b(null,(e,s,n)=>{if(!n){s(E,null);return}const r=e(k),i=e(E);if(ue(r,i).totalAfterDiscount<1e4&&n.discountType==="percentage"){s(P,{id:Date.now().toString(),message:"percentage 쿠폰은 10,000원 이상 구매 시 사용 가능합니다.",type:"error"});return}s(E,n),s(P,{id:Date.now().toString(),message:"쿠폰이 적용되었습니다.",type:"success"})}),ut=b(null,(e,s)=>{if(e(k).length===0){s(P,{id:Date.now().toString(),message:"장바구니가 비어있습니다.",type:"error"});return}s(dt),s(P,{id:Date.now().toString(),message:"주문이 완료되었습니다!",type:"success"})}),mt=b(e=>e(k).reduce((n,r)=>n+r.quantity,0)),R=I("coupons",Ye),xt=b(null,(e,s,n)=>{const r=e(R);if(r.find(l=>l.code===n.code)){s(P,{id:Date.now().toString(),message:"이미 존재하는 쿠폰 코드입니다.",type:"error"});return}s(R,[...r,n]),s(P,{id:Date.now().toString(),message:"쿠폰이 추가되었습니다.",type:"success"})}),ht=b(null,(e,s,n)=>{const r=e(R),i=e(E),l=r.filter(c=>c.code!==n);s(R,l),i?.code===n&&s(Te,null),s(P,{id:Date.now().toString(),message:"쿠폰이 삭제되었습니다.",type:"success"})}),M=b({name:"",price:0,stock:0,description:"",discounts:[]}),z=b(!1),F=b(null),ft=b(null,(e,s,n)=>{n&&n.preventDefault();const r=e(M),i=e(F);i&&i!=="new"?s(nt,{id:i,productForm:r}):s(st,r),s(M,{name:"",price:0,stock:0,description:"",discounts:[]}),s(z,!1),s(F,null)}),pt=b(null,(e,s,n)=>{typeof n=="string"?(s(F,n),n==="new"&&s(M,{name:"",price:0,stock:0,description:"",discounts:[]})):(s(F,n.id),s(M,{name:n.name,price:n.price,stock:n.stock,description:n.description||"",discounts:n.discounts||[]})),s(z,!0)}),gt=b(null,(e,s)=>{s(F,null),s(M,{name:"",price:0,stock:0,description:"",discounts:[]}),s(z,!1)});b(null,(e,s)=>{s(F,null)});const yt=b(null,(e,s,n)=>{const r=e(M);s(M,{...r,...n})}),bt=b(null,(e,s,n)=>{s(z,n)}),B=b({name:"",code:"",discountType:"amount",discountValue:0}),me=b(!1),vt=b(null,(e,s,n)=>{n&&n.preventDefault();const r=e(B);s(xt,r),s(B,{name:"",code:"",discountType:"amount",discountValue:0}),s(me,!1)}),jt=b(null,(e,s,n)=>{const r=e(B);s(B,{...r,...n})}),Le=b(null,(e,s,n)=>{s(me,n)}),wt=()=>{const e=C(B),s=S(vt),n=S(jt),r=S(Le),i=S(P),l=o=>{s(o)},c=o=>{n(o)},x=o=>{r(o)},a=(o,d)=>{i({id:Date.now().toString(),message:o,type:d})};return t.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:t.jsxs("form",{onSubmit:l,className:"space-y-4",children:[t.jsx("h3",{className:"text-md font-medium text-gray-900",children:"새 쿠폰 생성"}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰명"}),t.jsx("input",{type:"text",value:e.name,onChange:o=>c({name:o.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:"신규 가입 쿠폰",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰 코드"}),t.jsx("input",{type:"text",value:e.code,onChange:o=>c({code:o.target.value.toUpperCase()}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm font-mono",placeholder:"WELCOME2024",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"할인 타입"}),t.jsxs("select",{value:e.discountType,onChange:o=>c({...e,discountType:o.target.value,discountValue:0}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",children:[t.jsx("option",{value:"amount",children:"정액 할인"}),t.jsx("option",{value:"percentage",children:"정률 할인"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e.discountType==="amount"?"할인 금액":"할인율(%)"}),t.jsx("input",{type:"text",value:e.discountValue===0?"":e.discountValue,onChange:o=>{const{value:d}=o.target;if(d===""){c({discountValue:0});return}if(e.discountType==="percentage"){if(/^\d*\.?\d*$/.test(d)){const m=parseFloat(d);c({discountValue:m})}}else/^\d+$/.test(d)&&c({discountValue:parseInt(d)})},onBlur:o=>{const{value:d}=o.target;if(d==="")c({discountValue:0});else if(e.discountType==="percentage"){const m=parseFloat(d);(m<0||m>100)&&(a("할인율은 100%를 초과할 수 없습니다","error"),c({discountValue:0}))}},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:e.discountType==="amount"?"5000":"10",required:!0})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:"쿠폰 생성"})]})]})})},Nt=()=>{const e=C(R),s=C(me),n=S(ht),r=S(Le),i=c=>{n(c)},l=c=>{r(c)};return t.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsx("h2",{className:"text-lg font-semibold",children:"쿠폰 관리"})}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.map(c=>t.jsx("div",{className:"relative bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 border border-indigo-200",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:c.name}),t.jsx("p",{className:"text-sm text-gray-600 mt-1 font-mono",children:c.code}),t.jsx("div",{className:"mt-2",children:t.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white text-indigo-700",children:c.discountType==="amount"?`${c.discountValue.toLocaleString()}원 할인`:`${c.discountValue}% 할인`})})]}),t.jsx("button",{onClick:()=>i(c.code),className:"text-gray-400 hover:text-red-600 transition-colors",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},c.code)),t.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center hover:border-gray-400 transition-colors",children:t.jsxs("button",{onClick:()=>l(!s),className:"text-gray-400 hover:text-gray-600 flex flex-col items-center",children:[t.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t.jsx("p",{className:"mt-2 text-sm font-medium",children:"새 쿠폰 추가"})]})})]}),s&&t.jsx(wt,{})]})]})},St=({activeTab:e,setActiveTab:s})=>t.jsx("div",{className:"border-b border-gray-200 mb-6",children:t.jsxs("nav",{className:"-mb-px flex space-x-8",children:[t.jsx("button",{onClick:()=>s("products"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${e==="products"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"상품 관리"}),t.jsx("button",{onClick:()=>s("coupons"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${e==="coupons"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"쿠폰 관리"})]})}),Ct=()=>{const e=C(M),s=C(F),n=S(ft),r=S(gt),i=S(yt),l=S(P),c=d=>{n(d)},x=()=>{r()},a=d=>{i(d)},o=(d,m)=>{l({id:Date.now().toString(),message:d,type:m})};return t.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:t.jsxs("form",{onSubmit:c,className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s==="new"?"새 상품 추가":"상품 수정"}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상품명"}),t.jsx("input",{type:"text",value:e.name,onChange:d=>a({name:d.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"설명"}),t.jsx("input",{type:"text",value:e.description,onChange:d=>a({description:d.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"가격"}),t.jsx("input",{type:"text",value:e.price===0?"":e.price,onChange:d=>{const{value:m}=d.target;(m===""||/^\d+$/.test(m))&&a({price:m===""?0:parseInt(m)})},onBlur:d=>{const{value:m}=d.target;m===""?a({price:0}):parseInt(m)<0&&(o("가격은 0보다 커야 합니다","error"),a({price:0}))},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"재고"}),t.jsx("input",{type:"text",value:e.stock===0?"":e.stock,onChange:d=>{const{value:m}=d.target;(m===""||/^\d+$/.test(m))&&a({stock:m===""?0:parseInt(m)})},onBlur:d=>{const{value:m}=d.target;m===""?a({stock:0}):parseInt(m)<0?(o("재고는 0보다 커야 합니다","error"),a({stock:0})):parseInt(m)>9999&&(o("재고는 9999개를 초과할 수 없습니다","error"),a({stock:9999}))},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"할인 정책"}),t.jsxs("div",{className:"space-y-2",children:[e.discounts.map((d,m)=>t.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded",children:[t.jsx("input",{type:"number",value:d.quantity,onChange:y=>{const j=[...e.discounts];j[m].quantity=parseInt(y.target.value)||0,a({discounts:j})},className:"w-20 px-2 py-1 border rounded",min:"1",placeholder:"수량"}),t.jsx("span",{className:"text-sm",children:"개 이상 구매 시"}),t.jsx("input",{type:"number",value:d.rate*100,onChange:y=>{const j=[...e.discounts];j[m].rate=(parseInt(y.target.value)||0)/100,a({discounts:j})},className:"w-16 px-2 py-1 border rounded",min:"0",max:"100",placeholder:"%"}),t.jsx("span",{className:"text-sm",children:"% 할인"}),t.jsx("button",{type:"button",onClick:()=>{const y=e.discounts.filter((j,w)=>w!==m);a({discounts:y})},className:"text-red-600 hover:text-red-800",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},m)),t.jsx("button",{type:"button",onClick:()=>{a({discounts:[...e.discounts,{quantity:10,rate:.1}]})},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"+ 할인 추가"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:s==="new"?"추가":"수정"})]})]})})},De=(e,s)=>{const n=e.toLocaleString();return s?`${n}원`:`₩${n}`},At=()=>{const e=C(L),s=C(z),n=S(pt),r=S(rt),i=S(bt),l=(o,d)=>{if(d){const m=e.find(y=>y.id===d);if(m&&m.stock<=0)return"SOLD OUT"}return De(o,!0)},c=o=>{n(o)},x=o=>{r(o)},a=()=>{i(!0),n("new")};return t.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"상품 목록"}),t.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-900 text-white text-sm rounded-md hover:bg-gray-800",children:"새 상품 추가"})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상품명"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가격"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"재고"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"설명"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(o=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:o.name}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l(o.price,o.id)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o.stock>10?"bg-green-100 text-green-800":o.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[o.stock,"개"]})}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:o.description||"-"}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[t.jsx("button",{onClick:()=>c(o),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"수정"}),t.jsx("button",{onClick:()=>x(o.id),className:"text-red-600 hover:text-red-900",children:"삭제"})]})]},o.id))})]})}),s&&t.jsx(Ct,{})]})},kt=()=>{const[e,s]=Z(He);return t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"관리자 대시보드"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"상품과 쿠폰을 관리할 수 있습니다"})]}),t.jsx(St,{activeTab:e,setActiveTab:s}),e==="products"?t.jsx(At,{}):t.jsx(Nt,{})]})},_t=()=>{const e=C(E),s=C(R),n=S(Te),r=i=>{n(i)};return t.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"쿠폰 할인"}),t.jsx("button",{className:"text-xs text-blue-600 hover:underline",children:"쿠폰 등록"})]}),s.length>0&&t.jsxs("select",{className:"w-full text-sm border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-blue-500",value:e?.code||"",onChange:i=>{const l=s.find(c=>c.code===i.target.value);r(l||null)},children:[t.jsx("option",{value:"",children:"쿠폰 선택"}),s.map(i=>t.jsxs("option",{value:i.code,children:[i.name," (",i.discountType==="amount"?`${i.discountValue.toLocaleString()}원`:`${i.discountValue}%`,")"]},i.code))]})]})},Pt=()=>{const e=C(ot),s=S(ut),n=()=>{s()};return t.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"결제 정보"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"상품 금액"}),t.jsxs("span",{className:"font-medium",children:[e.totalBeforeDiscount.toLocaleString(),"원"]})]}),e.totalBeforeDiscount-e.totalAfterDiscount>0&&t.jsxs("div",{className:"flex justify-between text-red-500",children:[t.jsx("span",{children:"할인 금액"}),t.jsxs("span",{children:["-",(e.totalBeforeDiscount-e.totalAfterDiscount).toLocaleString(),"원"]})]}),t.jsxs("div",{className:"flex justify-between py-2 border-t border-gray-200",children:[t.jsx("span",{className:"font-semibold",children:"결제 예정 금액"}),t.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[e.totalAfterDiscount.toLocaleString(),"원"]})]})]}),t.jsxs("button",{onClick:n,className:"w-full mt-4 py-3 bg-yellow-400 text-gray-900 rounded-md font-medium hover:bg-yellow-500 transition-colors",children:[e.totalAfterDiscount.toLocaleString(),"원 결제하기"]}),t.jsx("div",{className:"mt-3 text-xs text-gray-500 text-center",children:t.jsx("p",{children:"* 실제 결제는 이루어지지 않습니다"})})]})},Tt=()=>{const e=C(k),s=S(ct),n=S(lt),r=l=>{s(l)},i=(l,c)=>{n({productId:l,quantity:c})};return t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"sticky top-24 space-y-4",children:[t.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[t.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"장바구니"]}),e.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),t.jsx("p",{className:"text-gray-500 text-sm",children:"장바구니가 비어있습니다"})]}):t.jsx("div",{className:"space-y-3",children:e.map(l=>{const c=_e(l,e),x=l.product.price*l.quantity,a=c<x,o=a?Math.round((1-c/x)*100):0;return t.jsxs("div",{className:"border-b pb-3 last:border-b-0",children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 flex-1",children:l.product.name}),t.jsx("button",{onClick:()=>r(l.product.id),className:"text-gray-400 hover:text-red-500 ml-2",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("button",{onClick:()=>i(l.product.id,l.quantity-1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:t.jsx("span",{className:"text-xs",children:"−"})}),t.jsx("span",{className:"mx-3 text-sm font-medium w-8 text-center",children:l.quantity}),t.jsx("button",{onClick:()=>i(l.product.id,l.quantity+1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:t.jsx("span",{className:"text-xs",children:"+"})})]}),t.jsxs("div",{className:"text-right",children:[a&&t.jsxs("span",{className:"text-xs text-red-500 font-medium block",children:["-",o,"%"]}),t.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Math.round(c).toLocaleString(),"원"]})]})]})]},l.product.id)})})]}),e.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(_t,{}),t.jsx(Pt,{})]})]})})},Lt=()=>{const[e,s]=Z(de),[n]=Z(Ae),r=C(k),i=C(mt),l=S(Xe);return t.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40 border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4",children:t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsxs("div",{className:"flex items-center flex-1",children:[t.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"SHOP"}),!e&&t.jsx("div",{className:"ml-8 flex-1 max-w-md",children:t.jsx("input",{type:"text",value:n,onChange:c=>l(c.target.value),placeholder:"상품 검색...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})})]}),t.jsxs("nav",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:()=>s(!e),className:`px-3 py-1.5 text-sm rounded transition-colors ${e?"bg-gray-800 text-white":"text-gray-600 hover:text-gray-900"}`,children:e?"쇼핑몰로 돌아가기":"관리자 페이지로"}),!e&&t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),r.length>0&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:i})]})]})]})})})},Dt=()=>{const e=C(L),s=C(ke),n=C(Pe),r=C(de),i=S(it),l=(a,o)=>{if(o){const d=e.find(m=>m.id===o);if(d&&n(d)<=0)return"SOLD OUT"}return De(a,r)},c=a=>{i(a)},x=s?e.filter(a=>a.name.toLowerCase().includes(s.toLowerCase())||a.description&&a.description.toLowerCase().includes(s.toLowerCase())):e;return t.jsx("div",{className:"lg:col-span-3",children:t.jsxs("section",{children:[t.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"전체 상품"}),t.jsxs("div",{className:"text-sm text-gray-600",children:["총 ",e.length,"개 상품"]})]}),x.length===0?t.jsx("div",{className:"text-center py-12",children:t.jsxs("p",{className:"text-gray-500",children:['"',s,'"에 대한 검색 결과가 없습니다.']})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(a=>{const o=n(a);return t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-24 h-24 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.isRecommended&&t.jsx("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"BEST"}),a.discounts.length>0&&t.jsxs("span",{className:"absolute top-2 left-2 bg-orange-500 text-white text-xs px-2 py-1 rounded",children:["~",Math.max(...a.discounts.map(d=>d.rate))*100,"%"]})]}),t.jsxs("div",{className:"p-4",children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:a.name}),a.description&&t.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:a.description}),t.jsxs("div",{className:"mb-3",children:[t.jsx("p",{className:"text-lg font-bold text-gray-900",children:l(a.price,a.id)}),a.discounts.length>0&&t.jsxs("p",{className:"text-xs text-gray-500",children:[a.discounts[0].quantity,"개 이상 구매시 할인"," ",a.discounts[0].rate*100,"%"]})]}),t.jsxs("div",{className:"mb-3",children:[o<=5&&o>0&&t.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["품절임박! ",o,"개 남음"]}),o>5&&t.jsxs("p",{className:"text-xs text-gray-500",children:["재고 ",o,"개"]})]}),t.jsx("button",{onClick:()=>c(a),disabled:o<=0,className:`w-full py-2 px-4 rounded-md font-medium transition-colors ${o<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"}`,children:o<=0?"품절":"장바구니 담기"})]})]},a.id)})})]})})},Et=({notification:e,onRemove:s})=>{const[n,r]=T.useState(!1),[i,l]=T.useState(!1);T.useEffect(()=>{const a=setTimeout(()=>r(!0),10);return()=>clearTimeout(a)},[]),T.useEffect(()=>{const a=setTimeout(()=>{c()},3e3);return()=>clearTimeout(a)},[]);const c=()=>{l(!0),setTimeout(()=>{s(e.id)},300)},x=()=>{switch(e.type){case"error":return"bg-red-600";case"warning":return"bg-yellow-600";default:return"bg-green-600"}};return t.jsx("div",{className:`transform transition-all duration-300 ease-in-out ${n&&!i?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}`,children:t.jsxs("div",{className:`p-4 rounded-md shadow-lg text-white flex justify-between items-center ${x()} min-w-0`,children:[t.jsx("span",{className:"mr-2 flex-1 text-sm font-medium break-words",children:e.message}),t.jsx("button",{onClick:c,className:"text-white hover:text-gray-200 transition-colors duration-150 flex-shrink-0 ml-2","aria-label":"알림 닫기",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})},Mt=()=>{const e=C(W),s=S(et);return e.length===0?null:t.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2 max-w-sm w-full pr-4",children:e.map(n=>t.jsx(Et,{notification:n,onRemove:s},n.id))})},It=()=>{const[e]=Z(de);return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Mt,{}),t.jsx(Lt,{}),t.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:e?t.jsx(kt,{}):t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[t.jsx(Dt,{}),t.jsx(Tt,{})]})})]})};Me.createRoot(document.getElementById("root")).render(t.jsx(ae.StrictMode,{children:t.jsx(It,{})}));
